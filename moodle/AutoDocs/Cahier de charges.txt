ğŸ“˜ Cahier des Charges â€” Automatisation RH & Contrats
I. Objectif gÃ©nÃ©ral
DÃ©velopper une application web en Django permettant :

de gÃ©rer les employÃ©s via des formulaires complets.

de gÃ©nÃ©rer automatiquement des contrats (CDI, etc.) Ã  partir de modÃ¨les.

de proposer une signature Ã©lectronique intÃ©grÃ©e.

de permettre un aperÃ§u PDF avant gÃ©nÃ©ration finale.

dâ€™intÃ©grer une base de donnÃ©es SQLite (ou Airtable en source secondaire).

de centraliser tous les contrats gÃ©nÃ©rÃ©s, signÃ©s et les informations RH.

II. FonctionnalitÃ©s dÃ©jÃ  dÃ©veloppÃ©es âœ…
1. ğŸ’¾ Base de donnÃ©es
Utilisation de SQLite.

CrÃ©ation de la table user avec les champs suivants :

PrÃ©nom, Nom, CivilitÃ©, Date et lieu de naissance, NationalitÃ©

Adresse, NumÃ©ro de sÃ©curitÃ© sociale

Titre de sÃ©jour, NumÃ©ro + date validitÃ©

Poste, Date de prise de poste, Position, Coefficient

Lieu de travail, Limitation gÃ©ographique rÃ©gionale

Nom de l'entreprise

2. ğŸ“‹ Formulaire employÃ©
Affichage du formulaire de crÃ©ation dâ€™un employÃ©.

SÃ©paration du formulaire en colonnes pour une meilleure UX (gauche / centre / droite).

IntÃ©gration du CSS dans un fichier sÃ©parÃ© (employer.css) avec fond dÃ©gradÃ©.

3. ğŸ§  SÃ©lection du type de contrat (Ã©tape initiale)
Choix du type de document (ex: contrat_cdi) avant de remplir les informations.

4. ğŸ“„ GÃ©nÃ©ration PDF automatisÃ©e
IntÃ©gration de modÃ¨les (contrat_cdi.html).

DonnÃ©es dynamiques injectÃ©es dans le template HTML via Django.

Conversion HTML â†’ PDF via xhtml2pdf.

5. ğŸ–Š Signature
Affichage du bloc de signature avec :

Signature entreprise (image)

PrÃ©nom/Nom/CivilitÃ© de l'employÃ©

Signature dynamique intÃ©grÃ©e dans le PDF.

6. ğŸŒ Airtable (source secondaire)
RequÃªte vers Airtable si les donnÃ©es ne sont pas trouvÃ©es dans SQLite.

III. FonctionnalitÃ©s Ã  dÃ©velopper ğŸ› ï¸
1. ğŸ‘ï¸ AperÃ§u du contrat avant crÃ©ation PDF (Preview)
Nouvelle vue pour gÃ©nÃ©rer un aperÃ§u HTML du contrat rempli avant conversion PDF.

Ajout dâ€™un bouton : PrÃ©visualiser le contrat.

PossibilitÃ© de revenir en arriÃ¨re pour corriger les champs.

2. ğŸ” Signature Ã©lectronique avancÃ©e (avec validation)
Ajout dâ€™une Ã©tape oÃ¹ l'utilisateur ou lâ€™employÃ© peut valider la signature.

IntÃ©gration potentielle avec une API de signature (e.g. SignRequest, DocuSign).

Workflow :

GÃ©nÃ©ration du contrat

Envoi pour signature

RÃ©cupÃ©ration du contrat signÃ©

3. ğŸ“š Historique des contrats
Liste des contrats gÃ©nÃ©rÃ©s avec :

Nom de lâ€™employÃ©

Type de contrat

Date de crÃ©ation

Statut (signÃ©/non signÃ©)

Bouton pour tÃ©lÃ©charger chaque contrat en PDF.

4. ğŸ” Dashboard RH
Vue dâ€™ensemble de tous les employÃ©s avec filtres :

Poste, date dâ€™embauche, statut contrat

Stats : nombre de contrats signÃ©s, Ã  venir, expirÃ©s

5. ğŸ“¦ Export & sauvegarde
Sauvegarde automatique dans un rÃ©pertoire /contrats/

PossibilitÃ© dâ€™export CSV de la base user.

6. âœï¸ Ã‰dition manuelle du contrat (Ã©diteur PDF en ligne)
Lorsquâ€™un contrat est modifiÃ© manuellement (ex: via un Ã©diteur intÃ©grÃ© dans le navigateur), les champs du formulaire doivent Ãªtre mis Ã  jour automatiquement :

dans la base SQLite

dans Airtable (via lâ€™API REST)

âš ï¸ Ce scÃ©nario est utile lorsquâ€™un employÃ© est crÃ©Ã© Ã  partir du formulaire contrat mais nâ€™existe pas encore dans la base. Lâ€™application doit alors :

CrÃ©er lâ€™employÃ© dans la base en parallÃ¨le de la gÃ©nÃ©ration du contrat.

Synchroniser toutes les donnÃ©es dans les deux bases.

7. ğŸ“ Ã‰dition visuelle du PDF dans le navigateur
Mise en place dâ€™un Ã©diteur PDF dans le navigateur type WordPress ou Google Docs :

Permettre la modification visuelle du texte du contrat (police, alignement, contenu)

BasÃ© sur un Ã©diteur WYSIWYG (type PDF.js + Fabric.js, ou react-pdf-editor)

Workflow :

Le contrat est gÃ©nÃ©rÃ© Ã  partir du template.

Il sâ€™ouvre dans un Ã©diteur visuel.

Lâ€™utilisateur peut modifier le contenu avant validation.

Une fois confirmÃ©, le PDF final est gÃ©nÃ©rÃ© et sauvegardÃ©.

IV. Contraintes techniques
Ã‰lÃ©ment	SpÃ©cification
Framework	Django (Python)
Base de donnÃ©es	SQLite (AirTable en source secondaire si donnÃ©e manquante)
PDF	xhtml2pdf
Signature	Image statique + API Ã  intÃ©grer ultÃ©rieurement
CSS	Fichier sÃ©parÃ© (employer.css), responsive, fond dÃ©gradÃ©
Stockage fichiers	Local ou cloud Ã  dÃ©finir (type /media/contrats/)
SÃ©curitÃ©	Limitation des accÃ¨s (vue admin uniquement), Ã  dÃ©finir plus tard
Synchronisation Airtable	Lorsquâ€™un employÃ© est ajoutÃ© ou un contrat modifiÃ©, les donnÃ©es sont envoyÃ©es vers Airtable en parallÃ¨le de SQLite
API	Utilisation de la clÃ© API Airtable et de lâ€™ID de base pour chaque opÃ©ration
Gestion des doublons	VÃ©rification par nom + prÃ©nom + date de naissance pour Ã©viter de crÃ©er deux fois la mÃªme entrÃ©e

V. Roadmap â³
Formulaire EmployÃ©	âœ… TerminÃ©	
GÃ©nÃ©ration PDF Contrat	âœ… TerminÃ©	
Signature image dans PDF	âœ… TerminÃ©	
Airtable fallback (lecture)	âœ… TerminÃ©	
Preview contrat avant PDF	âœ… TerminÃ©
Signature Ã©lectronique API	âœ… TerminÃ©	
Historique des contrats	ğŸ”œ Ã€ faire	
Dashboard RH	ğŸ”œ Ã€ faire	
Ã‰diteur PDF visuel dans le navigateur	ğŸ”œ Ã€ faire	
CrÃ©ation/sauvegarde automatique Airtable + DB lors de lâ€™Ã©dition	âœ… TerminÃ©